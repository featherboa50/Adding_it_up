---
title: "Hospital Report"
author: "Ariel Cooper"
date: "`r Sys.Date()`"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

if(!require(tidyverse)) install.packages("tidyverse", repos = "https://cran.rstudio.com/")
if(!require(Hmisc)) install.packages("Hmisc", repos = "https://cran.rstudio.com/")
if(!require(kamila)) install.packages("kamila", repos = "https://cran.rstudio.com/")
if(!require(caret)) install.packages("caret", repos = "https://cran.rstudio.com/")
if(!require(recipes)) install.packages("recipes", repos = "https://cran.rstudio.com/")
if(!require(MLmetrics)) install.packages("MLmetrics", repos = "https://cran.rstudio.com/")
if(!require(GGally)) install.packages("GGally", repos = "https://cran.rstudio.com/")
if(!require(ggbiplot)) install.packages("ggbiplot", repos = "https://cran.rstudio.com/")
if(!require(pls)) install.packages("pls", repos = "https://cran.rstudio.com/")



#library(readr)
library(tidyverse)
library(Hmisc) # data set is available through this package
library(kamila)
library(caret)
library(recipes)
library(MLmetrics) #LogLoss/Cross-Entropy Loss
library(GGally)
library(ggbiplot)
library(pls)


#color blind friendly colors
cb_cols <- 
  c("#999999", "#E69F00", "#56B4E9", "#009E73", 
    "#F0E442", "#0072B2", "#D55E00", "#CC79A7")
```

```{r data_setup, echo = FALSE, message=FALSE, warning=FALSE}
getHdata(support2)
#remove fields that are findings from previous models and those deceased before discharge 
support <- data.frame(support2) %>% 
  select(-aps, -sps, -surv2m, -surv6m, -prg2m, -prg6m, -dnr, -dnrday) %>%
  filter(hospdead == 0)

# Final hold-out test set will be 10% of patient's data
set.seed(365, sample.kind="Rounding") # if using R 3.6 or later
# set.seed(365) # if using R 3.5 or earlier
test_index <- createDataPartition(y = support$death, times = 1, p = 0.1, list = FALSE)
main <- support[-test_index,]
final <- support[test_index,]
```


## Background
In 1995 the ___ group completed a study to help improve the predicted prognosis of terminally ill patients (SORCE). The study was run at 5 different hospitals around the United States. Participants were chosen by having at least 1 of 9 terminal diseases and had less than 50% predicted survival rate (determined by other _____). It was completed in two phases spanning several years. In phase 1, 1989-1991, ____ participants were selected. In phase 2, 1992-1995, there were ___ participants. The data collection methods were near identical. 
For this project I am narrowing the scope to predicting the survival rate after discharge from the hospital. This could be used to see what factors affect the patient long term that could be improved, and allow for better planning for end of life care.
 
##### RMSE and BCE what is it and how it is calculated?

To measure the accuracy of the predictions, two different methods were used. The first is root mean squared error (RMSE), which measures the difference of the prediction from the actual result (SOURCE). 

How its calculated

The second method is (BCE). The advantages for BCE in this report is that it is used with binary results(SOURCE). This investigation will be looking at the results of whether or not a patient survived, a yes or no result. BCE is measuring how suprising????? 

How its calculated

## Exploring the Data

## Pre-processing

## Methods tried

#### Guessing

## Conclusion

## References
Knaus, William & Harrell, Frank & Lynn, Joanne & Goldman, L & Phillips, Russell & Connors, Jr, Alfred & Dawson, Neal & Fulkerson, W & Califf, R & Desbiens, N & Layde, Peter & Oye, Robert & Bellamy, P & Hakim, Rabia & Wagner, D. (1995). The SUPPORT Prognostic Model. Objective Estimates of Survival for Seriously Ill Hospitalized Adults. Study to Understand Prognoses and Preferences for Outcomes and Risks of Treatments. Annals of internal medicine. 122. 191-203. 




THINGS TO IMPROVE ON
PCA, deal with categorical data, onehot encoding?
## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r cars}
summary(cars)
```

## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
